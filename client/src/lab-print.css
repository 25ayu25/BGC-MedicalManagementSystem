/* Lab printing - exact pattern from working treatment prescription */

/* Base page sizing: exact A4 content box inside margins */
:root {
  --page-w: 210mm;
  --page-h: 297mm;
  --page-m: 12mm; /* printer-safe margins */
}

/* The printable card */
#lab-request-print.prescription,
#lab-report-print.prescription {
  width: var(--page-w);
  min-height: calc(var(--page-h) - 2 * var(--page-m));
  margin: 0 auto;
  padding: 8mm 10mm;
  box-sizing: border-box;

  display: flex;
  flex-direction: column;   /* lets footer stick to bottom */
  gap: 6mm;
  background: #fff;
}

/* Push footer to the bottom of the page */
.prescription .rx-footer { margin-top: auto; }
.prescription .rx-footer .sig {
  display: flex; flex-direction: column; align-items: flex-start; gap: 2mm;
}
.prescription .rx-footer .sig .line {
  width: 70mm; height: 0; border-bottom: 1px solid #000; margin-top: 6mm;
}
.prescription .valid { font-size: 10pt; margin-top: 3mm; }

/* Avoid awkward breaks inside lists/sections */
.avoid-break { break-inside: avoid; page-break-inside: avoid; }

/* Print rules */
@media print {
  @page { size: A4; margin: var(--page-m); }

  /* show ONLY the prescription */
  body * { visibility: hidden; }
  #lab-request-print, #lab-request-print * { visibility: visible; }
  #lab-report-print, #lab-report-print * { visibility: visible; }
  
  #lab-request-print { position: absolute; left: 0; top: 0; width: 100%; }
  #lab-report-print { position: absolute; left: 0; top: 0; width: 100%; }

  /* remove shadows/borders that can cause overflow */
  .no-print { display: none !important; }
  .shadow-md, .shadow-lg { box-shadow: none !important; }
  .rounded-lg { border-radius: 0 !important; }
  .bg-gray-50 { background-color: white !important; }
}

/* Screen preview helpers */
@media screen {
  .prescription { box-shadow: 0 0 0.5rem rgba(0,0,0,.08); }
}