You‚Äôre getting a blank print page because your app‚Äôs old global print CSS hides everything:

@media print {
  body * { visibility: hidden; }
  #prescription, #prescription * { visibility: visible; }
  /* ‚Ä¶maybe similar rules for lab/report‚Ä¶ */
}


When the new ‚Äúisolated print‚Äù window copies your CSS, that rule runs there too‚Äîbut the exceptions (#prescription, etc.) don‚Äôt exist in that window‚Äîso the whole page becomes invisible ‚Üí blank.

Fix it permanently in two steps.

1) Delete (or neutralize) the global ‚Äúhide-all‚Äù print CSS

In your global index.css (or wherever it lives), remove the whole block like above.
You don‚Äôt need it anymore because you‚Äôre printing from an isolated window.

If you prefer to keep it for other pages, wrap it so it only runs in-page:

@media print {
  body[data-legacy-print] * { visibility: hidden; }
  body[data-legacy-print] #prescription,
  body[data-legacy-print] #prescription * { visibility: visible; }
}


(You won‚Äôt set data-legacy-print in the isolated window.)

2) Add a hard override in your print helper (belt & suspenders)

Update your printUtils.ts so the isolated window force-shows content even if any hiding rules slip in:

// printUtils.ts
function collectHeadCSS(): string {
  const parts: string[] = [`<base href="${location.origin}">`];
  document.querySelectorAll('link[rel="stylesheet"], style').forEach(el => {
    parts.push((el as HTMLElement).outerHTML);
  });
  return parts.join("");
}

export function printByHtml(html: string, title = "Print") {
  const w = window.open("", "_blank", "width=900,height=1200");
  if (!w) return;

  const headCSS = collectHeadCSS();
  const inlineCSS = `
    <style>
      @page { size: A4; margin: 0; }
      html, body { margin: 0; padding: 0; }
      .rx-print{
        width:210mm; height:297mm; padding:12mm; box-sizing:border-box;
        display:flex; flex-direction:column; overflow:hidden;
        -webkit-print-color-adjust: exact; print-color-adjust: exact;
      }
      .mt-auto{ margin-top:auto !important; }
      /* üîß Neutralize any hide-all rules copied from app CSS */
      @media print {
        *, *::before, *::after { visibility: visible !important; }
        html, body, #page { visibility: visible !important; }
        /* If any display:none sneaks in, undo it for our page */
        #page, #page * { display: initial !important; }
      }
    </style>
  `;

  w.document.write(`<!doctype html><html><head><title>${title}</title>${headCSS}${inlineCSS}</head>
    <body><div class="rx-print" id="page">${html}</div></body></html>`);
  w.document.close();
  setTimeout(() => { w.focus(); w.print(); w.close(); }, 350);
}

export function printById(id: string, title?: string) {
  const node = document.getElementById(id);
  if (node) printByHtml(node.innerHTML, title);
}

Quick sanity checks

Buttons call printById('‚Ä¶-print', 'Title') (no window.print() anywhere).

Printable wrappers are <div id="‚Ä¶-print" class="rx-print">‚Ä¶</div> (no 100vh, no print:h).

Shared <ClinicHeader title="‚Ä¶"/> used in Treatment/Lab/X-ray.

In the print dialog, turn off ‚ÄúHeaders and footers.‚Äù

Do those two edits (remove the hide-all block + add the override), and your print preview will no longer be blank‚Äîand the header will look exactly like on screen.